"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[881],{881:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var r=t(791);const a={MoviesBox:"Movies_MoviesBox__jPCE3",form:"Movies_form__4ow+Z",input:"Movies_input__KrUqs",btn:"Movies_btn__TlfBQ",link:"Movies_link__MzAfU",item:"Movies_item__Ba4aJ"};var o=t(689),i=t(87),n=t(184);const c=()=>{const[e,s]=(0,r.useState)(sessionStorage.getItem("searchQuery")||""),[t,c]=(0,r.useState)([]),[l]=(0,r.useState)("6ec0ba8fa041ffdfd513a6b00a854a64"),[u,h]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),_=(0,o.s0)(),d=(0,r.useCallback)((async e=>{const s="https://api.themoviedb.org/3/search/movie?query=".concat(e,"&api_key=").concat(l);try{h(!0);const e=await fetch(s),t=await e.json();e.ok?(c(t.results),f(null)):(f("Failed to fetch search results"),c([]))}catch(m){console.error("Error fetching search results:",m),f("Failed to fetch search results"),c([])}finally{h(!1)}}),[l]);(0,r.useEffect)((()=>{const e=sessionStorage.getItem("foundMovies");if(e)try{const s=JSON.parse(e);c(s)}catch(m){console.error("Error parsing JSON from sessionStorage:",m),c([])}else console.error("No saved movies found in sessionStorage."),c([])}),[]);return(0,n.jsxs)("div",{className:a.MoviesBox,children:[(0,n.jsxs)("form",{className:a.form,onSubmit:async s=>{if(s.preventDefault(),""!==e.trim())try{sessionStorage.setItem("searchQuery",e),sessionStorage.setItem("foundMovies",JSON.stringify(t)),await d(e),_("/movies?query=".concat(e))}catch(m){console.error("Error during search:",m)}},children:[(0,n.jsx)("input",{className:a.input,onChange:e=>{s(e.target.value)},type:"text",value:e}),(0,n.jsx)("button",{className:a.btn,type:"submit",children:"Search"})]}),u&&(0,n.jsx)("p",{children:"Loading..."}),m&&(0,n.jsxs)("p",{children:["Error: ",m]}),t.length>0&&(0,n.jsx)("ul",{className:a.searchResults,children:t.map((e=>(0,n.jsx)("li",{className:a.item,children:e.original_title&&(0,n.jsx)(i.rU,{className:a.link,to:"/movies/".concat(e.id),children:e.original_title})},e.id)))})]})}}}]);
//# sourceMappingURL=881.79ff6c12.chunk.js.map