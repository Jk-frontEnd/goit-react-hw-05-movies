"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[881],{881:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var a=t(791);const r={MoviesBox:"Movies_MoviesBox__jPCE3",form:"Movies_form__4ow+Z",input:"Movies_input__KrUqs",btn:"Movies_btn__TlfBQ",link:"Movies_link__MzAfU",item:"Movies_item__Ba4aJ"};var o=t(689),i=t(87),c=t(184);const n=()=>{const[e,s]=(0,a.useState)(""),[t,n]=(0,a.useState)((()=>{const e=sessionStorage.getItem("movies");return e?JSON.parse(e):[]})),[l]=(0,a.useState)("6ec0ba8fa041ffdfd513a6b00a854a64"),[u,m]=(0,a.useState)(!1),[h,_]=(0,a.useState)(null),v=(0,o.s0)(),f=(0,a.useCallback)((async e=>{const s="https://api.themoviedb.org/3/search/movie?query=".concat(e,"&api_key=").concat(l);try{m(!0);const e=await fetch(s),t=await e.json();e.ok?(n(t.results),_(null),sessionStorage.setItem("movies",JSON.stringify(t.results))):(_("Failed to fetch search results"),n([]))}catch(h){console.error("Error fetching search results:",h),_("Failed to fetch search results"),n([])}finally{m(!1)}}),[l]);(0,a.useEffect)((()=>{const e=sessionStorage.getItem("movies");new URLSearchParams(window.location.search).get("query")?e&&n(JSON.parse(e)):sessionStorage.removeItem("movies")}),[]);return(0,c.jsxs)("div",{className:r.MoviesBox,children:[(0,c.jsxs)("form",{className:r.form,onSubmit:async s=>{if(s.preventDefault(),""!==e.trim())try{localStorage.setItem("searchQuery",e),await f(e),v("/movies?query=".concat(e))}catch(h){console.error("Error during search:",h)}},children:[(0,c.jsx)("input",{className:r.input,onChange:e=>{s(e.target.value)},type:"text",value:e}),(0,c.jsx)("button",{className:r.btn,type:"submit",children:"Search"})]}),u&&(0,c.jsx)("p",{children:"Loading..."}),h&&(0,c.jsxs)("p",{children:["Error: ",h]}),t.length>0&&(0,c.jsx)("ul",{className:r.searchResults,children:t.map((e=>(0,c.jsx)("li",{className:r.item,children:e.original_title&&(0,c.jsx)(i.rU,{className:r.link,to:"/movies/".concat(e.id),children:e.original_title})},e.id)))})]})}}}]);
//# sourceMappingURL=881.d5cf6301.chunk.js.map