"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[881],{881:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var a=t(791);const r={MoviesBox:"Movies_MoviesBox__jPCE3",form:"Movies_form__4ow+Z",input:"Movies_input__KrUqs",btn:"Movies_btn__TlfBQ",link:"Movies_link__MzAfU",item:"Movies_item__Ba4aJ"};var o=t(87),i=t(184);const n=()=>{const[e,s]=(0,a.useState)(sessionStorage.getItem("searchQuery")||""),[t,n]=(0,a.useState)([]),[c]=(0,a.useState)("6ec0ba8fa041ffdfd513a6b00a854a64"),[l,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null),f=(0,a.useCallback)((()=>{sessionStorage.setItem("searchQuery",e),sessionStorage.setItem("foundMovies",JSON.stringify(t))}),[e,t]),_=(0,a.useCallback)((async e=>{const s="https://api.themoviedb.org/3/search/movie?query=".concat(e,"&api_key=").concat(c);try{u(!0);const e=await fetch(s),t=await e.json();e.ok?(n(t.results),m(null)):(m("Failed to fetch search results"),n([]))}catch(h){console.error("Error fetching search results:",h),m("Failed to fetch search results"),n([])}finally{u(!1),f()}}),[c,n,u,m,f]);(0,a.useEffect)((()=>{const e=sessionStorage.getItem("foundMovies");if(e)try{const s=JSON.parse(e);n(s)}catch(h){console.error("Error parsing JSON from sessionStorage:",h),n([])}else console.error("No saved movies found in sessionStorage."),n([])}),[]);return(0,i.jsxs)("div",{className:r.MoviesBox,children:[(0,i.jsxs)("form",{className:r.form,onSubmit:async s=>{if(s.preventDefault(),""!==e.trim())try{await _(e)}catch(h){console.error("Error during search:",h)}f()},children:[(0,i.jsx)("input",{className:r.input,onChange:e=>{s(e.target.value)},type:"text",value:e}),(0,i.jsx)("button",{className:r.btn,type:"submit",children:"Search"})]}),l&&(0,i.jsx)("p",{children:"Loading..."}),h&&(0,i.jsxs)("p",{children:["Error: ",h]}),t.length>0&&(0,i.jsx)("ul",{className:r.searchResults,children:t.map((e=>(0,i.jsx)("li",{className:r.item,children:e.original_title&&(0,i.jsx)(o.rU,{className:r.link,to:"/movies/".concat(e.id),children:e.original_title})},e.id)))})]})}}}]);
//# sourceMappingURL=881.ff4c4872.chunk.js.map