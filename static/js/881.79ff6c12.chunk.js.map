{"version":3,"file":"static/js/881.79ff6c12.chunk.js","mappings":"2KACA,SAAgB,UAAY,0BAA0B,KAAO,qBAAqB,MAAQ,sBAAsB,IAAM,oBAAoB,KAAO,qBAAqB,KAAO,sB,8BCG7K,MAgGA,EAhGeA,KACb,MAAOC,EAAaC,IAAkBC,EAAAA,EAAAA,UAASC,eAAeC,QAAQ,gBAAkB,KACjFC,EAAeC,IAAaJ,EAAAA,EAAAA,UAAS,KACrCK,IAAWL,EAAAA,EAAAA,UAAS,qCACpBM,EAASC,IAAcP,EAAAA,EAAAA,WAAS,IAChCQ,EAAOC,IAAYT,EAAAA,EAAAA,UAAS,MAC7BU,GAAWC,EAAAA,EAAAA,MAEXC,GAAqBC,EAAAA,EAAAA,cAAYC,UACrC,MAAMC,EAAY,mDAAAC,OAAsDC,EAAQ,aAAAD,OAAYX,GAE5F,IACEE,GAAW,GACX,MAAMW,QAAiBC,MAAMJ,GACvBK,QAAaF,EAASE,OAExBF,EAASG,IACXjB,EAAUgB,EAAKE,SACfb,EAAS,QAETA,EAAS,kCACTL,EAAU,IAQd,CANE,MAAOI,GACPe,QAAQf,MAAM,iCAAkCA,GAChDC,EAAS,kCACTL,EAAU,GACZ,CAAC,QACCG,GAAW,EACb,IACC,CAACF,KAGJmB,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAcxB,eAAeC,QAAQ,eAE3C,GAAIuB,EACF,IACE,MAAMC,EAAeC,KAAKC,MAAMH,GAChCrB,EAAUsB,EAIZ,CAHE,MAAOlB,GACPe,QAAQf,MAAM,0CAA2CA,GACzDJ,EAAU,GACZ,MAEAmB,QAAQf,MAAM,4CACdJ,EAAU,GACZ,GACC,IAqBH,OACEyB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAAA,UAAiBC,SAAA,EAC/BH,EAAAA,EAAAA,MAAA,QAAMC,UAAWC,EAAAA,KAAaE,SAjBbnB,UAEnB,GADAoB,EAAEC,iBACyB,KAAvBrC,EAAYsC,OACd,IACEnC,eAAeoC,QAAQ,cAAevC,GACtCG,eAAeoC,QAAQ,cAAeV,KAAKW,UAAUnC,UAE/CS,EAAmBd,GACzBY,EAAS,iBAADM,OAAkBlB,GAG5B,CAFE,MAAOU,GACPe,QAAQf,MAAM,uBAAwBA,EACxC,CACF,EAKuDwB,SAAA,EACnDO,EAAAA,EAAAA,KAAA,SAAOT,UAAWC,EAAAA,MAAcS,SAtBhBN,IACpBnC,EAAemC,EAAEO,OAAOC,MAAM,EAqB8BC,KAAK,OAAOD,MAAO5C,KAC3EyC,EAAAA,EAAAA,KAAA,UAAQT,UAAWC,EAAAA,IAAYY,KAAK,SAAQX,SAAC,cAI9C1B,IAAWiC,EAAAA,EAAAA,KAAA,KAAAP,SAAG,eACdxB,IAASqB,EAAAA,EAAAA,MAAA,KAAAG,SAAA,CAAG,UAAQxB,KACpBL,EAAcyC,OAAS,IACtBL,EAAAA,EAAAA,KAAA,MAAIT,UAAWC,EAAAA,cAAqBC,SACjC7B,EAAc0C,KAAKC,IAClBP,EAAAA,EAAAA,KAAA,MAAIT,UAAWC,EAAAA,KAAYC,SACxBc,EAAaC,iBACZR,EAAAA,EAAAA,KAACS,EAAAA,GAAI,CAAClB,UAAWC,EAAAA,KAAakB,GAAE,WAAAjC,OAAa8B,EAAaI,IAAKlB,SAC5Dc,EAAaC,kBAHaD,EAAaI,UAUhD,C","sources":["webpack://react-homework-template/./src/pages/Movies/Movies.module.css?82ee","pages/Movies/Movies.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"MoviesBox\":\"Movies_MoviesBox__jPCE3\",\"form\":\"Movies_form__4ow+Z\",\"input\":\"Movies_input__KrUqs\",\"btn\":\"Movies_btn__TlfBQ\",\"link\":\"Movies_link__MzAfU\",\"item\":\"Movies_item__Ba4aJ\"};","import React, { useState, useEffect, useCallback } from 'react';\nimport styles from './Movies.module.css';\nimport { Link, useNavigate } from 'react-router-dom';\n\nconst Movies = () => {\n  const [searchQuery, setSearchQuery] = useState(sessionStorage.getItem('searchQuery') || '');\n  const [fittingMovies, setMovies] = useState([]);\n  const [api_key] = useState('6ec0ba8fa041ffdfd513a6b00a854a64');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  \n  const fetchSearchResults = useCallback(async (newQuery) => {\n    const apiUrlSearch = `https://api.themoviedb.org/3/search/movie?query=${newQuery}&api_key=${api_key}`;\n\n    try {\n      setLoading(true);\n      const response = await fetch(apiUrlSearch);\n      const json = await response.json();\n\n      if (response.ok) {\n        setMovies(json.results);\n        setError(null);\n      } else {\n        setError('Failed to fetch search results');\n        setMovies([]);\n      }\n    } catch (error) {\n      console.error('Error fetching search results:', error);\n      setError('Failed to fetch search results');\n      setMovies([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [api_key]);\n\n  \n  useEffect(() => {\n    const savedMovies = sessionStorage.getItem('foundMovies');\n    \n    if (savedMovies) {\n      try {\n        const parsedMovies = JSON.parse(savedMovies);\n        setMovies(parsedMovies);\n      } catch (error) {\n        console.error('Error parsing JSON from sessionStorage:', error);\n        setMovies([]);\n      }\n    } else {\n      console.error('No saved movies found in sessionStorage.');\n      setMovies([]);\n    }\n  }, []);\n  \n  const handleChange = (e) => {\n    setSearchQuery(e.target.value);\n  };\n  \n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (searchQuery.trim() !== '') {\n      try {\n        sessionStorage.setItem('searchQuery', searchQuery);\n        sessionStorage.setItem('foundMovies', JSON.stringify(fittingMovies));\n        \n        await fetchSearchResults(searchQuery);\n        navigate(`/movies?query=${searchQuery}`);\n      } catch (error) {\n        console.error('Error during search:', error);\n      }\n    }\n  };\n  \n  return (\n    <div className={styles.MoviesBox}>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <input className={styles.input} onChange={handleChange} type=\"text\" value={searchQuery} />\n        <button className={styles.btn} type=\"submit\">\n          Search\n        </button>\n      </form>\n      {loading && <p>Loading...</p>}\n      {error && <p>Error: {error}</p>}\n      {fittingMovies.length > 0 && (\n        <ul className={styles.searchResults}>\n          {fittingMovies.map((fittingMovie) => (\n            <li className={styles.item} key={fittingMovie.id}>\n              {fittingMovie.original_title && (\n                <Link className={styles.link} to={`/movies/${fittingMovie.id}`}>\n                  {fittingMovie.original_title}\n                </Link>\n              )}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default Movies;"],"names":["Movies","searchQuery","setSearchQuery","useState","sessionStorage","getItem","fittingMovies","setMovies","api_key","loading","setLoading","error","setError","navigate","useNavigate","fetchSearchResults","useCallback","async","apiUrlSearch","concat","newQuery","response","fetch","json","ok","results","console","useEffect","savedMovies","parsedMovies","JSON","parse","_jsxs","className","styles","children","onSubmit","e","preventDefault","trim","setItem","stringify","_jsx","onChange","target","value","type","length","map","fittingMovie","original_title","Link","to","id"],"sourceRoot":""}